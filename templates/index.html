<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input type="text" id="name">
    <button id="btn" onclick=get()>取得</button>
    <h2 id="result">検索結果</h2>
    <div>
        <ul id="song">
        </ul>
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
    function get() {
        var name = $('#name').val();
        if (name) {
            $.ajax({
                url: './api/get_song',
                type: 'POST',
                data: { name: name },
                dataType: 'json'
            }).done((datas) => {
                $("#song").empty();
                if (datas == "not found") $("#song").append("<li>検索結果がありません</li>");
                else {
                    datas = JSON.parse(JSON.stringify(datas));
                    $("#result").text("検索結果 : " + datas.name);
                    $.each(datas.playlist, function (index, playlist) {
                        $.each(playlist.song, function (index, song) {
                            $("#song").append("<li>" +playlist.name + " : " + (index+1) + " " + song.title + "(" + song.artist + ")</li>");
                        });
                    });
                }
            });
        }
    }
</script>

</html>